YUI.add("moodle-atto_multilang2-button",function(e,t){var n={TAG:"multilang_tag",CONTENT:"multilang_content"},r="%lang",i="%content",s="languages",o='{"en":"English (en)"}',u="{mlang "+r+"}",a="{mlang}",f='&nbsp;<span class="'+n.TAG+'">{mlang '+r+"}</span>"+'<span class="'+n.CONTENT+'">'+i+"</span>"+'<span class="'+n.TAG+'">{mlang}</span>&nbsp;';e.namespace("M.atto_multilang2").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{initializer:function(){var e=[];e=this._initializeToolbarItems(),this.addToolbarMenu({globalItemConfig:{callback:this._addTags},icon:"icon",iconComponent:"atto_multilang2",items:e}),this.get("host").on("atto:selectionchanged",this._checkSelectionChange,this)},_initializeToolbarItems:function(){var e=[],t,n;t=JSON.parse(this.get(s));for(n in t)e.push({text:t[n],callbackArgs:n});return e},_addTags:function(e,t){var n=this.get("host"),s=f;s=s.replace(r,t),s=s.replace(i,n.getSelection()),n.insertContentAtFocusPoint(s),this.markUpdated()},_checkSelectionChange:function(){var t=this.get("host"),n=t.getSelectionParentNode(),r=e.one(n).get("text"),i,s;i=e.one(n).toString().indexOf("#text")>-1,s=r.match(/{mlang/g).length===1,i&&s&&t.setSelection(t.getSelectionFromNode(e.one(n)))}},{ATTRS:{languages:o}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});
