YUI.add("moodle-atto_multilang2-button",function(e,t){var n={BEGIN:"multilang_tag multilang_begin",END:"multilang_tag multilang_end",CONTENT:"multilang_content"},r="outline: 1px dotted;padding: 0.1em;margin: 0em 0.1em;background-color: #ffffaa;",i="%lang",s="%content",o="languages",u='{"en":"English (en)"}',a="{mlang "+i+"}",f="{mlang}",l='&nbsp;<span class="'+n.BEGIN+'" style="'+r+'">{mlang '+i+"}</span>"+'<span class="'+n.CONTENT+'">'+s+"</span>"+'<span class="'+n.END+'" style="'+r+'">{mlang}</span>&nbsp;';e.namespace("M.atto_multilang2").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{_languages:null,initializer:function(){var e=[],t;this._languages=JSON.parse(this.get(o));for(t in this._languages)e.push({text:this._languages[t],callbackArgs:t});this.addToolbarMenu({globalItemConfig:{callback:this._addTags},items:e}),this.get("host").on("atto:selectionchanged",this._checkSelectionChange,this)},_addTags:function(e,t){var n=this.get("host"),r=l;r=r.replace(i,t),r=r.replace(s,n.getSelection()),n.insertContentAtFocusPoint(r),this.markUpdated()},_checkSelectionChange:function(){var t=this.get("host"),n=t.getSelectionParentNode(),r,s,o,u;s=e.one(n).get("text");for(r in this._languages)o=a.replace(i,r),u=f.replace(i,r),(s===o||s===u)&&t.setSelection(t.getSelectionFromNode(e.one(n)))}},{ATTRS:{languages:u}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});
